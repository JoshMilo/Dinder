// Generated by CoffeeScript 1.8.0
$(function() {
  console.log("ready");
  $('#try-again').hide();
  $("form").on("submit", function() {
    var valueOne, valueTwo;
    console.log("submitted");
    valueOne = $('input[name="location"]').val();
    valueTwo = $('input[name="language"]').val();
    console.log(valueOne, valueTwo);
    return $.ajax({
      type: "POST",
      url: "/",
      data: {
        'first': valueOne,
        'second': valueTwo
      },
      success: function(data) {
        var randNum;
        if (data.items.length > 0) {
          $('input').hide();
          $('#try-again').show();
          randNum = Math.floor(Math.random() * Object.keys(data.items).length);
          console.log(data.items[randNum]);
          $('#results').html('<a href="' + data.items[randNum].html_url + '">' + data.items[randNum].login + '</a><br><img src="' + data.items[randNum].avatar_url + '" class="avatar">');
          return $('input').val("");
        } else {
          return $('#results').html("There was an error somewhere...everywhere. Try again");
        }
      },
      error: function(error) {
        return console.log(error);
      }
    });
  });
  return $('#try-again').on('click', function() {
    $('input').val('').show();
    $('#try-again').hide();
    return $('#results').html('');
  });
});
